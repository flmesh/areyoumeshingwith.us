[![Open in GitHub Codespaces](https://github.com/codespaces/badge.svg)](https://github.com/codespaces/new?repo=flmesh/areyoumeshingwith.us&quickstart=1)

# AreYouMeshingWith.us
Florida Mesh - https://AreYouMeshingWith.us/ website

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

## Table of Contents
- [Architecture](#architecture)
- [Website](#website)
- [Local dev](#local-dev)
- [Contributing](#contributing)
- [Directory layout](#directory-layout)

## Architecture

Infrastructure for this project is managed using [Terraform](https://www.terraform.io/) in the [`terraform/`](terraform/) directory. The deployment leverages AWS Amplify for hosting, branch previews, and custom domain management.

**Key components provisioned:**
- **AWS Amplify App**: Hosts the static website, connects to the Git repository, and enables automatic branch creation/deletion for preview environments.
- **AWS Amplify Branch**: Configures the `main` branch as the production branch and enables pull request previews.
- **AWS Amplify Domain Association**: Associates your custom domain (and the `mta-sts` subdomain) with the Amplify app, using a custom ACM certificate for HTTPS.

**Notably:**
- All static site hosting, CDN, and branch preview functionality are managed by AWS Amplify.
- No S3, CloudFront, or Route53 resources are directly managed in the Terraform code.
- DNS and ACM certificate management are assumed to be handled outside this Terraform configuration, except for referencing the ACM certificate.

See [`terraform/`](terraform/) for all configuration files and variables.

## Website

The website is generated by [Hugo](https://gohugo.io/) static HTML generator that is then deployed into the infrastructure managed via Terraform. The [HB Framework](https://hbstack.dev/) used for the theme layout requires the Hugo extended version along with additional build tools. If you want to run a local dev server to test you will need the [build tool](https://hbstack.dev/docs/getting-started/prerequisites/#build-tools) installed.

### Local dev

**Prerequisites:**
- [Hugo Extended](https://gohugo.io/getting-started/installing/) (required for HB Framework)
- [Node.js & npm](https://nodejs.org/)
- [HB Build Tools](https://hbstack.dev/docs/getting-started/prerequisites/#build-tools)

With the prerequisite build tools installed you can run a local dev server to work on you can proceed with the following workflow:

```sh
npm ci
npm run dev
```

This will run a [local webserver](http://localhost:1313/) that you can connect to and view your work.

**Troubleshooting:**
- If you see errors about missing Hugo features, ensure you have the *extended* version.
- If npm commands fail, check your Node.js version (recommend v18+).

## Developing with GitHub Codespaces

This project supports [GitHub Codespaces](https://github.com/features/codespaces) for a fully configured, cloud-based development environment. The included devcontainer provides all necessary tools and dependencies for local development and deployment.

### Features

- **Git** (latest, built from source)
- **Go** and common Go utilities, with the Go extension
- **Node.js**, **npm**, and **eslint**
- **Hugo** static site generator
- **Terraform CLI**, with optional **TFLint** and **Terragrunt**, and the Terraform extension

### Getting Started

1. Click the **Code** button on the repository page and select **Open with Codespaces**.
2. Wait for the environment to build and initialize.
3. All required tools are pre-installed and available on the `PATH`.
4. The Hugo development server starts automatically—no need to run `hugo server` manually.
5. Use the integrated terminal and editor for development, testing, and deployment.

### Common Tasks

- **Run Terraform commands:**  
  ```sh
  terraform init
  terraform plan
  terraform apply
  ```
- **Run Go or Node.js tools:**  
  Use `go`, `node`, or `npm` as needed.
- **Common Hugo tasks:**  
  - Create new content:
    ```sh
    hugo new blog/my-first-post.md
    ```
  - Check site configuration:
    ```sh
    hugo config
    ```
  - Tidy Hugo modules (update/download required modules):
    ```sh
    hugo mod tidy
    ```

For more details, see the [.devcontainer](.devcontainer/) directory

### Contributing

If you would like to contribute, fork this repository and work on your content changes/updates. When you are satisfied submit your PR back to this repository to have it included.

**Contribution steps:**
1. Fork this repo and create a new branch for your changes.
2. Make your changes and commit with clear messages.
3. Run `npm run dev` to test locally.
4. Push your branch and open a Pull Request.
5. Add yourself to `content/authors/` if you are a new contributor.
    * Create a folder for your displayed name.
    * Inside that folder create a `.md` file called `_index.md`
       This is the file that will contain any contact information and avatar.
       Hugo supports a wide range of socials in this section, so if you would like to link a different acount then what's shown in the example below, feel free to reach out.
       Here is the list of Hugo Supported [Socials](https://github.com/hbstack/socials/blob/main/layouts/partials/hb/modules/socials/link.html).

       For our avatars we are using [Gravatar](https://gravatar.com/) But you can also hardlink a photo to your file.
       To create the `email_hash` (the link to the Gravatar info.) follow this guide: [Creating Identifier (hash)](https://docs.gravatar.com/rest/hash/).
    * Your finished `_index.md` should look something like this when finished:
      ```
      ---
      title: John Doe
      email_hash: Random MD5 Hash from Gravatar Hash Creation
      socials:
        github: John Doe's Git
        email: John Doe's Email
      ---
      ```

    



The most common `Hugo` command you'll need to understand will be [hugo new content](https://gohugo.io/commands/hugo_new_content/) as most of the site configuration and theming will not need to be modified. It is beneficial to understand the `Hugo` [directory structure](https://gohugo.io/getting-started/directory-structure/) to better understand how things work together.

#### Directory layout

```
.
├── Dockerfile
├── LICENSE
├── README.md
├── archetypes/             # Default content `kind`s
│   ├── blog.md
│   ├── docs.md
│   ├── gallery.md
│   └── tutorials.md
├── assets/
│   ├── favicon.ico
│   ├── hb/
│   ├── images/
│   │   └── logo.png
│   ├── jsconfig.json
│   └── mask-icon.svg
├── config/
├── content/
│   ├── _index.md
│   ├── archives/           # Contents managed by Hugo
│   │   ├── 2025/
│   │   │   └── _index.md
│   │   └── _index.md
│   ├── authors/            # If you contribute be sure to add yourself as an author
│   │   ├── _index.md
│   │   └── jbouse/
│   │       └── _index.md
│   ├── blog/               # Blog articles would go under here
│   │   └── _index.md
│   ├── categories/         # Contents managed by Hugo
│   │   └── _index.md
│   ├── docs/               # Documentation pages would go under here
│   │   ├── _index.md
│   │   ├── installation/
│   │   │   └── _index.md
│   │   └── introduction/
│   │       └── index.md
│   ├── gallery/            # Image gallery directories can go here
│   │   └── _index.md
│   ├── series/             # Contents managed by Hugo
│   │   └── _index.md
│   └── tags/               # Contents managed by Hugo
│       └── _index.md
├── docker-compose.yml
├── go.mod
├── go.sum
├── layouts/
├── package-lock.json
├── package.json
├── renovate.json
└── terraform/      # Terraform Infrastructure as Code
```
